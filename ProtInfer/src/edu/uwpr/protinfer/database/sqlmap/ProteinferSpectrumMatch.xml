<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
      "http://ibatis.apache.org/dtd/sql-map-2.dtd"> 
<sqlMap namespace="ProteinferSpectrumMatch"> 

	<typeAlias alias="ProteinferSpectrumMatch" type="edu.uwpr.protinfer.database.dto.ProteinferSpectrumMatch"/>
	
	<resultMap class="ProteinferSpectrumMatch" id="pinferSMatchResult">
		<result property="msRunSearchResultId" column="msRunSearchResultID" nullValue="0"/>
		<result property="proteinferPeptideId" column="pinferPeptideID" nullValue="0"/>
		<result property="fdr" column="fdr" nullValue="-1.0"/>
	</resultMap>
	
	<parameterMap class="ProteinferSpectrumMatch" id="pinferSMatchParam">
		<parameter property="msRunSearchResultId" jdbcType="INTEGER" nullValue="0"/>
		<parameter property="proteinferPeptideId" jdbcType="INTEGER" nullValue="0"/>
		<parameter property="fdr" jdbcType="DOUBLE" />
	</parameterMap>
	
	<select id="selectMatchforMsResult" resultMap="pinferSMatchResult" parameterClass="Integer">
    	SELECT * FROM ProteinferSpectrumMatch WHERE msRunSearchResultID = #id#
    </select>
    
    <select id="selectMatchesForPeptide" resultMap="pinferSMatchResult" parameterClass="Integer">
    	SELECT * FROM ProteinferSpectrumMatch WHERE pinferPeptideID = #id#
    </select>
    
    <select id="selectMatchesForPinferId" resultMap="pinferSMatchResult" parameterClass="Integer">
    	SELECT * FROM ProteinferSpectrumMatch as psm, ProteinferPeptide as pep
    	WHERE pep.id = psm.pinferPeptideID 
    	AND pep.pinferId= #id#
    </select>
    
    <select id="selectMatchIdsForPinferId" resultClass="Integer" parameterClass="Integer">
    	SELECT psm.msRunSearchResultID FROM ProteinferSpectrumMatch as psm, ProteinferPeptide as pep
    	WHERE pep.id = psm.pinferPeptideID 
    	AND pep.pinferId= #id#
    </select>
    
    <insert id="insert" parameterMap="pinferSMatchParam">
    	INSERT INTO ProteinferSpectrumMatch (
    	msRunSearchResultID,
    	pinferPeptideID,
    	fdr) 
    	VALUES (?,?,?)
    </insert>
    
    <insert id="insertAll" parameterClass="String">
    	INSERT INTO ProteinferSpectrumMatch (
    	msRunSearchResultID,
    	pinferPeptideID,
    	fdr) 
    	VALUES $values$
    </insert>
    
</sqlMap>