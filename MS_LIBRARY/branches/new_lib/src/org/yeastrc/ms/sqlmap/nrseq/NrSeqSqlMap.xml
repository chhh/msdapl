<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
      "http://ibatis.apache.org/dtd/sql-map-2.dtd"> 
<sqlMap namespace="NrSeq"> 

    <select id="selectProteinAccession" resultClass="String" parameterClass="java.util.Map"> 
        SELECT accessionString FROM tblProteinDatabase 
        WHERE databaseID = #databaseId# 
        AND proteinID=#proteinId#
    </select> 
    
    <select id="selectDatabaseId" resultClass="Integer" parameterClass="String"> 
        SELECT id FROM tblDatabase WHERE name = #name#
    </select>
    
    <select id="selectProteinIdForDbNameExactMatch" resultClass="Integer" parameterClass="java.util.Map"> 
        SELECT pr.proteinID
        FROM tblDatabase as db, tblProteinDatabase as pr 
        WHERE db.name = #dbName#
        AND pr.accessionString = #accession#
        AND db.id = pr.databaseID
    </select>
    
    <select id="selectProteinIdForDbName" resultClass="Integer" parameterClass="java.util.Map"> 
        SELECT pr.proteinID
        FROM tblDatabase as db, tblProteinDatabase as pr 
        WHERE db.name = #dbName#
        AND pr.accessionString LIKE #accession#
        AND db.id = pr.databaseID
    </select>
    
    <select id="selectProteinIdForDbIdExactMatch" resultClass="Integer" parameterClass="java.util.Map"> 
        SELECT proteinID
        FROM tblProteinDatabase 
        WHERE databaseID = #dbId#
        AND accessionString = #accession#
    </select>
    
    <select id="selectProteinIdForDbIdPartialAcc" resultClass="Integer" parameterClass="java.util.Map"> 
        SELECT proteinID
        FROM tblProteinDatabase 
        WHERE databaseID = #dbId#
        AND accessionString LIKE #accession#
    </select>
    
    <select id="selectProteinIdForDbIdAndPeptideAndPartialAcc" resultClass="Integer" parameterClass="java.util.Map"> 
        SELECT pr.id
        FROM tblProteinSequence as seq, tblProtein as pr, tblProteinDatabase as pd 
        WHERE pd.databaseID = #dbId#
        AND pd.accessionString LIKE #accession#
        AND seq.sequence LIKE #sequence#
        AND seq.id = pr.sequenceID
        AND pr.id = pd.proteinID
    </select>
    
</sqlMap>