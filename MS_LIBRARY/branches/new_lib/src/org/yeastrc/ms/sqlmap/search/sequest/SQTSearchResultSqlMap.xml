<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
      "http://ibatis.apache.org/dtd/sql-map-2.dtd"> 
<sqlMap namespace="SequestResult"> 


	<typeAlias alias="SqtResultDb" type="org.yeastrc.ms.domain.sqtFile.impl.SQTSearchResultDbImpl"/>
	<typeAlias alias="SqtResult" type="org.yeastrc.ms.dao.sqtFile.ibatis.SQTSearchResultDAOImpl$SQTSearchResultSqlMapParam"/>
	
	
	<resultMap class="SqtResultDb" id="sqtResult" extends="MsSearchResult.msSearchResult">
		<result property="resultId" column="resultID" nullValue="0"/>
		<result property="xCorrRank" column="XCorrRank" nullValue="0"/>
		<result property="spRank" column="spRank" nullValue="0"/>
		<result property="deltaCN" column="deltaCN"/>
		<result property="xCorr" column="XCorr"/>
		<result property="sp" column="sp"/>
	</resultMap>
	
	<!-- None of the columns in SQTSearchResult can be null but in case
		 we try to save a SqtResult object with resultId or xCorrRank or spRank == 0
		 we should use NULL in the INSERT statement. This will throw a RuntimeException
	 -->
	<parameterMap class="SqtResult" id="sqtResultParam">
		<parameter property="resultId" jdbcType="INTEGER" nullValue="0"/>
		<parameter property="xCorrRank" jdbcType="INTEGER" nullValue="0"/>
		<parameter property="spRank" jdbcType="INTEGER" nullValue="0"/>
		<parameter property="deltaCN" jdbcType="DECIMAL"/>
		<parameter property="xCorr" jdbcType="DECIMAL"/>
		<parameter property="sp" jdbcType="DECIMAL"/>
		
	</parameterMap>
	
    
    <select id="select" resultMap="sqtResult" parameterClass="Integer">
		SELECT * FROM SQTSearchResult
		LEFT JOIN msPeptideSearchResult
		ON (SQTSearchResult.resultID = msPeptideSearchResult.id)
		WHERE resultID = #id#
	</select>
	
    
    <insert id="insert" parameterMap="sqtResultParam">
    	INSERT INTO SQTSearchResult (resultID, XCorrRank, spRank, deltaCN, XCorr, sp) 
    	VALUES (?,?,?,?,?,?)
    </insert>
    
    <insert id="insertAll" parameterClass="String">
    	INSERT INTO SQTSearchResult (resultId, XCorrRank, spRank, deltaCN, XCorr, sp) VALUES $values$
    </insert>
    
    <delete id="delete" parameterClass="Integer">
		DELETE FROM SQTSearchResult WHERE resultID=#id#
    </delete>
    
</sqlMap>