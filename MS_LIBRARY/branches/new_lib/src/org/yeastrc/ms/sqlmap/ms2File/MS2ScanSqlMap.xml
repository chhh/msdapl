<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
      "http://ibatis.apache.org/dtd/sql-map-2.dtd"> 
<sqlMap namespace="MS2Scan"> 

	<typeAlias alias="MS2ScanDb" type="org.yeastrc.ms.domain.ms2File.impl.MS2ScanDbImpl"/>
	
	<resultMap class="MS2ScanDb" id="MS2ScanResult" extends="MsScan.msScanResult">
		<result property="scanChargeList" 
				column="id" 
				select="MS2ScanCharge.selectForScan"/>
		<result property="chargeIndependentAnalysisList" 
				column="id" 
				select="MS2ChgIAnalysis.selectAnalysisForScan"/>
	</resultMap>
	
	
	<select id="select" resultMap="MS2ScanResult" parameterClass="Integer">
    	SELECT id, 
    			runID, 
    			startScanNumber, 
    			endScanNumber, 
    			level, 
    			preMZ, 
    			preScanID, 
    			prescanNumber, 
    			retentionTime,
    			fragmentationType,
    			UNCOMPRESS(data) as data 
    			FROM msScan, msScanData
    			WHERE msScan.id = msScanData.scanID
    			AND id= #id#
    </select>
    
</sqlMap>